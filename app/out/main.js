"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(t,e,o,s){void 0===s&&(s=o),Object.defineProperty(t,s,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,s){void 0===s&&(s=o),t[s]=e[o]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&__createBinding(e,t,o);return __setModuleDefault(e,t),e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.deactivate=exports.activate=void 0;const vscode=__importStar(require("vscode")),statBarBut=vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Left),modules=[];function activate(t){const{subscriptions:e,workspaceState:o}=t,s="vsccontextscript.on",a=o.get(s,!1);statBarBut.tooltip="Starts/stops all context scripts",statBarBut.command=s,statBarBut.show(),e.push(statBarBut),e.push(vscode.commands.registerCommand(s,(()=>{const e=o.get(s,!1);e?stop():run(t),o.update(s,!e)}))),a?run(t):stop()}function deactivate(){stop()}function run({subscriptions:t}){statBarBut.text="Ctx: ON";const e=vscode.workspace.workspaceFolders;if(e)for(const o of e){const e=vscode.workspace.getConfiguration("",o).get("contextScripts");if(e)for(const s of e){const e=require(`${o.uri.fsPath}/${s.path}`);modules.push(e),e.activate?.({vscode:vscode,subscriptions:t,params:s.parameters})}}}function stop(){statBarBut.text="Ctx: OFF";for(const t of modules)t.deactivate?.();modules.length=0}exports.activate=activate,exports.deactivate=deactivate;